<h3>dBtool</h3>
<input type="radio" name="a" value=10 checked>10log</input>
<input type="radio" name="a" value=20>20log</input>
<br><br>
<form autocomplete="off" style="display:flex;">
<fieldset style="width:10%;display:grid;">Ratio<input type="text" id=0 placeholder=ratio size=8 onkeyup="ic(0,1)" onclick="oc(this.id)">
dB<input type="text" id=1 placeholder=dB size=8 onkeyup="ci(1,0)" onclick="oc(this.id)"></fieldset>
<fieldset style="width:10%;display:grid;">Bit<input type="text" id=2 placeholder=bit size=8 onkeyup="bd(2,3)" onclick="oc(this.id)">
dB<input type="text" id=3 placeholder=dB size=8 onkeyup="db(3,2)" onclick="oc(this.id)"></fieldset></form>
<hr style="height:0;border:0;">
<fieldset style="width:60%"><legend>pcompcalc WIP not done yet +++calc varmax listener</legend>
<table border=0 align="left" style="table-layout:fixed;width:100%">
<tr><td>Loss </td><td><input type="text" size=2 placeholder="dB" value=2 id=4 onclick="oc(this.id)"></td></tr>
<tr><td>Threshold </td><td colspan="6" style="width:80%;"><input type="range" id=5 min="-60" max="0" step="1" value="-30" oninput="of('th',5);er()"></td><td id="th">-30</td></tr>
<tr><td>Ratio </td><td colspan="6" style="width:80%;"><input type="range" id=6 min="1" max="8" step="0.1" value="2" oninput="of('rt',6);er()"></td><td id="rt">2</td></tr>
<tr><td>Makeup </td><td colspan="6" style="width:80%;"><input type="range" id=7 min="0" max="30" step="0.1" value="12" oninput="of('mu',7);er()"></td><td id="mu"">12</td></tr>
<tr><td>Dry mix</td><td colspan="6" style="width:80%;"><input type="range" id=8 min="-72" max="0" step="0.2" value="0" oninput="of('dm',8);er()"></td><td id="dm">0</td><td id="dr">/x</td></tr>
<tr><td>Postgain, </td><td>wet rate, </td><td>npg </td><td>needs </td><td>to </td><td>add</td></tr>
</fieldset>
</table>
<script>
function ge(a){return document.getElementById(a)}
function qv(a){return document.querySelector(`input[name=${a}]:checked`).value}
function oc(a){ge(a).value=""}
function tf(a){return a.toFixed(6)}
function ic(a,b){ge(b).value=tf(qv("a")*Math.log10(ge(a).value))}
function ci(a,b){ge(b).value=tf(Math.pow(10,ge(a).value/qv("a")))}
function bd(a,b){ge(b).value=tf(qv("a")*Math.log10(Math.pow(2,ge(a).value)))}
function db(a,b){ge(b).value=tf(Math.log2(Math.pow(10,ge(a).value/qv("a"))))}
function of(a,b){ge(a).innerHTML=ge(b).value}
function er(){var m=(ge(5).value/ge(6).value)-ge(5).value-ge(4).value;ge(7).setAttribute("max",m);of('mu',7);var fr=qv("a")*Math.log10(1-Math.pow(10,(ge(7).value-m)/qv("a")));x=fr.toFixed(4);ge("dr").innerHTML=`/ ${x} `}
er();
</script>
<style>td > input[type='range']{width:100%;}</style>
